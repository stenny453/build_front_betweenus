{"version":3,"sources":["webpack:///src/app/components/client/client-routing.module.ts","webpack:///src/app/services/auth/auth-guard.service.ts"],"names":["routes","path","component","canActivate","ClientRoutingModule","forChild","AuthGuardService","authService","router","route","state","getToken","navigateByUrl","token","verifyToken","subscribe","data","error","console","log"],"mappings":"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","file":"components-client-client-routing-module-es5.js","sourcesContent":["import { LiveTipsComponent } from './../live/live-tips/live-tips.component';\r\nimport { NgModule } from \"@angular/core\";\r\nimport { Routes, RouterModule } from \"@angular/router\";\r\nimport { AuthGuardService } from \"src/app/services/auth/auth-guard.service\";\r\nimport { HomeClientComponent } from \"../home/home-connected/home-client.component\";\r\nimport { LiveFreeComponent } from \"../live/live-free/live-free.component\";\r\nimport { LivePrivateComponent } from \"../live/live-private/live-private.component\";\r\nimport { LiveVipComponent } from \"../live/live-vip/live-vip.component\";\r\nimport { PaiementComponent } from \"../paiement/paiement.component\";\r\nimport { BuyCreditComponent } from \"./buy-credit/buy-credit.component\";\r\nimport { ConfirmEmailComponent } from \"./confirm-email/confirm-email.component\";\r\nimport { ProfilComponent } from \"./profil/profil.component\";\r\nimport { ReactivateAccountComponent } from \"./reactivate-account/reactivate-account.component\";\r\nimport { SigninComponent } from \"./signin/signin.component\";\r\nimport { SignupComponent } from \"./signup/signup.component\";\r\nimport { LiveFreeSaloonComponent } from '../live/live-free-saloon/live-free-saloon.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: 'inscription',\r\n    component: SignupComponent\r\n  },\r\n  {\r\n    path: 'connexion',\r\n    component: SigninComponent\r\n  },\r\n  {\r\n    path: 'profile',\r\n    component: ProfilComponent,\r\n    canActivate: [AuthGuardService]\r\n  },\r\n  {\r\n    path: 'achat_de_credit',\r\n    component: BuyCreditComponent,\r\n    canActivate: [AuthGuardService]\r\n  },\r\n  {\r\n    path: 'paiement',\r\n    component: PaiementComponent,\r\n    canActivate: [AuthGuardService]\r\n  },\r\n  {\r\n    path: 'accueil/registered',\r\n    component: HomeClientComponent,\r\n    canActivate: [AuthGuardService]\r\n  },\r\n  {\r\n    path: 'live/free',\r\n    component: LiveFreeComponent,\r\n    canActivate: [AuthGuardService]\r\n  },\r\n  {\r\n    path: 'live/private',\r\n    component: LivePrivateComponent,\r\n    canActivate: [AuthGuardService]\r\n  },\r\n  {\r\n    path: 'live/vip',\r\n    component: LiveVipComponent,\r\n    canActivate: [AuthGuardService]\r\n  },\r\n  {\r\n    path: 'live/tips',\r\n    component: LiveTipsComponent,\r\n    canActivate: [AuthGuardService]\r\n  },\r\n  {\r\n    path: 'live/choice-us',\r\n    component: LiveFreeSaloonComponent,\r\n    canActivate: [AuthGuardService]\r\n  },\r\n  {\r\n    path: 'register/confirm',\r\n    component: ConfirmEmailComponent\r\n  },\r\n  {\r\n    path: 'reactivation/account',\r\n    component: ReactivateAccountComponent\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ClientRoutingModule { }\r\n","import { AuthService } from 'src/app/services/auth/auth.service';\r\nimport { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthGuardService implements CanActivate {\r\n\r\n  constructor(private authService : AuthService, public router : Router) { }\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean | UrlTree | Observable<boolean | UrlTree> | Promise<boolean | UrlTree> {\r\n    if(!this.authService.getToken()){\r\n        this.router.navigateByUrl(\"accueil\");\r\n        return false;\r\n    }\r\n    const token = this.authService.getToken();\r\n    this.authService.verifyToken(token).subscribe(\r\n      (data) => {\r\n        //console.log(data)\r\n        // this.router.navigateByUrl(\"client/accueil/registered\");\r\n      }, (error) => {\r\n        console.log(error);\r\n        this.router.navigateByUrl(\"accueil\");\r\n        return false;\r\n      }\r\n    )\r\n    return true\r\n  }\r\n}\r\n"]}