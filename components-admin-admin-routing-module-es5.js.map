{"version":3,"sources":["webpack:///src/app/services/auth/auth-admin-guard.service.ts","webpack:///src/app/components/admin/admin-routing.module.ts"],"names":["AuthAdminGuardService","authService","router","route","state","getToken","navigateByUrl","token","verifyAdminToken","subscribe","data","console","log","role","error","routes","path","component","canActivate","children","AdminRoutingModule","forChild"],"mappings":"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","file":"components-admin-admin-routing-module-es5.js","sourcesContent":["import { AuthService } from 'src/app/services/auth/auth.service';\r\nimport { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthAdminGuardService implements CanActivate {\r\n\r\n  constructor(private authService : AuthService, public router : Router) { }\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean | UrlTree | Observable<boolean | UrlTree> | Promise<boolean | UrlTree> {\r\n    if(!this.authService.getToken()){\r\n        this.router.navigateByUrl('authentification-admin')\r\n        return false\r\n    }\r\n    const token = this.authService.getToken();\r\n    this.authService.verifyAdminToken(token).subscribe(\r\n      (data) => {\r\n        console.log(data)\r\n        if (data && data.role === 'admin') {\r\n          return true\r\n        } else {\r\n          this.router.navigateByUrl('authentification-admin')\r\n          return false\r\n        }\r\n      }, (error) => {\r\n        console.log('Non autoriser')\r\n        // console.log(error)\r\n        // this.router.navigateByUrl('authentification-admin')\r\n        return false\r\n      }\r\n    )\r\n    return true\r\n  }\r\n}\r\n","import { ConnexionAdminComponent } from './connexion-admin/connexion-admin.component';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { DashboardAdminComponent } from './connected/dashboard-admin/dashboard-admin.component';\r\nimport { MainDashboardAdminComponent } from './connected/dashboard-admin/main-dashboard-admin/main-dashboard-admin.component';\r\nimport { ListClientsAdminComponent } from './connected/dashboard-admin/list-clients-admin/list-clients-admin.component';\r\nimport { BloquerClientsAdminComponent } from './connected/dashboard-admin/bloquer-clients-admin/bloquer-clients-admin.component';\r\nimport { StatistiqueClientsAdminComponent } from './connected/dashboard-admin/statistique-clients-admin/statistique-clients-admin.component';\r\nimport { DemandeClientsAdminComponent } from './connected/dashboard-admin/demande-clients-admin/demande-clients-admin.component';\r\nimport { ListModelsAdminComponent } from './connected/dashboard-admin/model/list-models-admin/list-models-admin.component';\r\nimport { BloquerModelsAdminComponent } from './connected/dashboard-admin/model/bloquer-models-admin/bloquer-models-admin.component';\r\nimport { AskModelsAdminComponent } from './connected/dashboard-admin/model/ask-models-admin/ask-models-admin.component';\r\nimport { StatistiqueModelsAdminComponent } from './connected/dashboard-admin/model/statistique-models-admin/statistique-models-admin.component';\r\nimport { DetailModelAdminComponent } from './connected/dashboard-admin/model/detail-model-admin/detail-model-admin.component';\r\nimport { PaiementAdminComponent } from './connected/dashboard-admin/administration/paiement-admin/paiement-admin.component';\r\nimport { ListPaiementAdminComponent } from './connected/dashboard-admin/administration/list-paiement-admin/list-paiement-admin.component';\r\nimport { AuthAdminGuardService } from '../../services/auth/auth-admin-guard.service';\r\nimport { MessageAdminComponent } from './connected/dashboard-admin/administration/message-admin/message-admin.component';\r\nimport { SettingAdminComponent } from './connected/dashboard-admin/administration/setting-admin/setting-admin.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DashboardAdminComponent,\r\n    canActivate: [AuthAdminGuardService],\r\n    children : [\r\n      {\r\n        path: '',\r\n        component: MainDashboardAdminComponent,\r\n      },\r\n      {\r\n        path: 'dashboard',\r\n        component: MainDashboardAdminComponent\r\n      },\r\n      {\r\n        path: 'les-clients',\r\n        component: ListClientsAdminComponent\r\n      },\r\n      {\r\n        path: 'les-clients-bloques',\r\n        component: BloquerClientsAdminComponent\r\n      },\r\n      {\r\n        path: 'les-demandes-clients',\r\n        component: DemandeClientsAdminComponent\r\n      },\r\n      {\r\n        path: 'clients-statistiques',\r\n        component: StatistiqueClientsAdminComponent\r\n      },\r\n      {\r\n        path: 'les-modeles',\r\n        component: ListModelsAdminComponent\r\n      },\r\n      {\r\n        path: 'les-modeles-bloques',\r\n        component: BloquerModelsAdminComponent\r\n      },\r\n      {\r\n        path: 'les-demandes-modeles',\r\n        component: AskModelsAdminComponent\r\n      },\r\n      {\r\n        path: 'modeles-statistiques',\r\n        component: StatistiqueModelsAdminComponent\r\n      },\r\n      {\r\n        path: 'detail-model',\r\n        component: DetailModelAdminComponent\r\n      },\r\n      {\r\n        path: 'list-paiement',\r\n        component: ListPaiementAdminComponent\r\n      },\r\n      {\r\n        path: 'paiement',\r\n        component: PaiementAdminComponent\r\n      },\r\n      {\r\n        path: 'message-admin',\r\n        component: MessageAdminComponent\r\n      },\r\n      {\r\n        path: 'setting-admin',\r\n        component: SettingAdminComponent\r\n      }\r\n    ]\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AdminRoutingModule { }\r\n\r\n"]}