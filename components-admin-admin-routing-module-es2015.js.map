{"version":3,"sources":["./src/app/services/auth/auth-admin-guard.service.ts","./src/app/components/admin/admin-routing.module.ts"],"names":[],"mappings":"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","file":"components-admin-admin-routing-module-es2015.js","sourcesContent":["import { AuthService } from 'src/app/services/auth/auth.service';\r\nimport { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthAdminGuardService implements CanActivate {\r\n\r\n  constructor(private authService : AuthService, public router : Router) { }\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean | UrlTree | Observable<boolean | UrlTree> | Promise<boolean | UrlTree> {\r\n    if(!this.authService.getToken()){\r\n        this.router.navigateByUrl('authentification-admin')\r\n        return false\r\n    }\r\n    const token = this.authService.getToken();\r\n    this.authService.verifyAdminToken(token).subscribe(\r\n      (data) => {\r\n        // console.log(data)\r\n        if (data && data.role === 'admin') {\r\n          return true\r\n        } else {\r\n          this.router.navigateByUrl('authentification-admin')\r\n          return false\r\n        }\r\n      }, (error) => {\r\n        // console.log('Non autoriser ', error.error.statusCode);\r\n        const errorCode = error.error.statusCode === 401 ? this.router.navigateByUrl('authentification-admin') : false;\r\n        // console.log(error)\r\n        // this.router.navigateByUrl('authentification-admin')\r\n        return false\r\n      }\r\n    )\r\n    return true\r\n  }\r\n}\r\n","import { ConnexionAdminComponent } from './connexion-admin/connexion-admin.component';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { DashboardAdminComponent } from './connected/dashboard-admin/dashboard-admin.component';\r\nimport { MainDashboardAdminComponent } from './connected/dashboard-admin/main-dashboard-admin/main-dashboard-admin.component';\r\nimport { ListClientsAdminComponent } from './connected/dashboard-admin/list-clients-admin/list-clients-admin.component';\r\nimport { BloquerClientsAdminComponent } from './connected/dashboard-admin/bloquer-clients-admin/bloquer-clients-admin.component';\r\nimport { StatistiqueClientsAdminComponent } from './connected/dashboard-admin/statistique-clients-admin/statistique-clients-admin.component';\r\nimport { DemandeClientsAdminComponent } from './connected/dashboard-admin/demande-clients-admin/demande-clients-admin.component';\r\nimport { ListModelsAdminComponent } from './connected/dashboard-admin/model/list-models-admin/list-models-admin.component';\r\nimport { BloquerModelsAdminComponent } from './connected/dashboard-admin/model/bloquer-models-admin/bloquer-models-admin.component';\r\nimport { AskModelsAdminComponent } from './connected/dashboard-admin/model/ask-models-admin/ask-models-admin.component';\r\nimport { StatistiqueModelsAdminComponent } from './connected/dashboard-admin/model/statistique-models-admin/statistique-models-admin.component';\r\nimport { DetailModelAdminComponent } from './connected/dashboard-admin/model/detail-model-admin/detail-model-admin.component';\r\nimport { PaiementAdminComponent } from './connected/dashboard-admin/administration/paiement-admin/paiement-admin.component';\r\nimport { ListPaiementAdminComponent } from './connected/dashboard-admin/administration/list-paiement-admin/list-paiement-admin.component';\r\nimport { AuthAdminGuardService } from '../../services/auth/auth-admin-guard.service';\r\nimport { MessageAdminComponent } from './connected/dashboard-admin/administration/message-admin/message-admin.component';\r\nimport { SettingAdminComponent } from './connected/dashboard-admin/administration/setting-admin/setting-admin.component';\r\nimport { SuiviModelsAdminComponent } from './connected/dashboard-admin/model/suivi-models-admin/suivi-models-admin.component';\r\nimport { CommissionsModelAdminComponent } from './connected/dashboard-admin/model/commissions-model-admin/commissions-model-admin.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DashboardAdminComponent,\r\n    canActivate: [AuthAdminGuardService],\r\n    children : [\r\n      {\r\n        path: '',\r\n        component: MainDashboardAdminComponent,\r\n      },\r\n      {\r\n        path: 'dashboard',\r\n        component: MainDashboardAdminComponent\r\n      },\r\n      {\r\n        path: 'les-clients',\r\n        component: ListClientsAdminComponent\r\n      },\r\n      {\r\n        path: 'les-clients-bloques',\r\n        component: BloquerClientsAdminComponent\r\n      },\r\n      {\r\n        path: 'les-demandes-clients',\r\n        component: DemandeClientsAdminComponent\r\n      },\r\n      {\r\n        path: 'clients-statistiques',\r\n        component: StatistiqueClientsAdminComponent\r\n      },\r\n      {\r\n        path: 'les-modeles',\r\n        component: ListModelsAdminComponent\r\n      },\r\n      {\r\n        path: 'les-modeles-bloques',\r\n        component: BloquerModelsAdminComponent\r\n      },\r\n      {\r\n        path: 'les-demandes-modeles',\r\n        component: AskModelsAdminComponent\r\n      },\r\n      {\r\n        path: 'suivi-modeles',\r\n        component: SuiviModelsAdminComponent\r\n      },\r\n      {\r\n        path: 'modeles-statistiques',\r\n        component: StatistiqueModelsAdminComponent\r\n      },\r\n      {\r\n        path: 'detail-model',\r\n        component: DetailModelAdminComponent\r\n      },\r\n      {\r\n        path: 'list-paiement',\r\n        component: ListPaiementAdminComponent\r\n      },\r\n      {\r\n        path: 'paiement',\r\n        component: PaiementAdminComponent\r\n      },\r\n      {\r\n        path: 'message-admin',\r\n        component: MessageAdminComponent\r\n      },\r\n      {\r\n        path: 'setting-admin',\r\n        component: SettingAdminComponent\r\n      },\r\n      {\r\n        path: 'commissions-model',\r\n        component: CommissionsModelAdminComponent\r\n      }\r\n    ]\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AdminRoutingModule { }\r\n\r\n"],"sourceRoot":"webpack:///"}