{"version":3,"sources":["./src/app/components/modele/model-routing.module.ts","./src/app/services/auth/auth-model-guard.service.ts"],"names":[],"mappings":"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","file":"components-modele-model-routing-module-es2015.js","sourcesContent":["import { NgModule } from \"@angular/core\";\r\nimport { Routes, RouterModule } from \"@angular/router\";\r\nimport { AuthModelGuardService } from \"src/app/services/auth/auth-model-guard.service\";\r\nimport { SendForgotModelComponent } from \"../forgot/send-forgot-model/send-forgot-model.component\";\r\nimport { AlbumsComponent } from \"./albums/albums.component\";\r\nimport { ConnexionModelComponent } from \"./connexion-model/connexion-model.component\";\r\nimport { DashboardComponent } from \"./dashboard/dashboard.component\";\r\nimport { InscriptionModelComponent } from \"./inscription-model/inscription-model.component\";\r\nimport { LiveChatModelComponent } from \"./live-chat-model/live-chat-model.component\";\r\nimport { LivePrivateModelComponent } from \"./live-private-model/live-private-model.component\";\r\nimport { LiveVipModelComponent } from \"./live-vip-model/live-vip-model.component\";\r\nimport { ProfilModelComponent } from \"./profil-model/profil-model.component\";\r\nimport { LiveFreeSaloonModelComponent } from './live-free-saloon-model/live-free-saloon-model.component';\r\nimport { LiveTipsClientsModelComponent } from './live-tips-clients-model/live-tips-clients-model.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: 'dashboard',\r\n    component: DashboardComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n    path: 'motdepasseoublie',\r\n    component: SendForgotModelComponent\r\n  },\r\n  {\r\n    path: 'connexion',\r\n    component: ConnexionModelComponent\r\n  },\r\n  {\r\n    path: 'inscription',\r\n    component: InscriptionModelComponent\r\n  },\r\n  {\r\n    path: 'albums',\r\n    component: AlbumsComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n    path: 'profile',\r\n    component: ProfilModelComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n    path: 'chat',\r\n    component: LiveChatModelComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n    path: 'live-private',\r\n    component: LivePrivateModelComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n    path: 'live-vip',\r\n    component: LiveVipModelComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n    path: 'live-tips-model',\r\n    component: LiveTipsClientsModelComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n  path: 'live-choice-us',\r\n  component: LiveFreeSaloonModelComponent,\r\n  canActivate: [AuthModelGuardService]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ModelRoutingModule { }\r\n","import { AuthService } from 'src/app/services/auth/auth.service';\r\nimport { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthModelGuardService implements CanActivate {\r\n\r\n  constructor(private authService : AuthService, public router : Router) { }\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean | UrlTree | Observable<boolean | UrlTree> | Promise<boolean | UrlTree> {\r\n    if(!this.authService.getToken()){\r\n        this.router.navigateByUrl(\"accueil\");\r\n        return false;\r\n    }\r\n    const token = this.authService.getToken();\r\n    this.authService.verifyToken(token).subscribe(\r\n      (data) => {\r\n        if (data && data.role === 'model') {\r\n          // this.router.navigateByUrl(\"modele/albums\");\r\n          return true;\r\n        } else {\r\n          this.router.navigateByUrl(\"accueil\");\r\n          return false;\r\n        }\r\n        // console.log(data)\r\n      }, (error) => {\r\n        console.log(error);\r\n        this.router.navigateByUrl(\"accueil\");\r\n        return false;\r\n      }\r\n    )\r\n    return true\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}