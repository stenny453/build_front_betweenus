{"version":3,"sources":["webpack:///src/app/components/modele/model-routing.module.ts","webpack:///src/app/services/auth/auth-model-guard.service.ts"],"names":["routes","path","component","canActivate","ModelRoutingModule","forChild","AuthModelGuardService","authService","router","route","state","getToken","navigateByUrl","token","verifyToken","subscribe","data","role","error","console","log"],"mappings":"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","file":"components-modele-model-routing-module-es5.js","sourcesContent":["import { NgModule } from \"@angular/core\";\r\nimport { Routes, RouterModule } from \"@angular/router\";\r\nimport { AuthModelGuardService } from \"src/app/services/auth/auth-model-guard.service\";\r\nimport { SendForgotModelComponent } from \"../forgot/send-forgot-model/send-forgot-model.component\";\r\nimport { AlbumsComponent } from \"./albums/albums.component\";\r\nimport { ConnexionModelComponent } from \"./connexion-model/connexion-model.component\";\r\nimport { DashboardComponent } from \"./dashboard/dashboard.component\";\r\nimport { InscriptionModelComponent } from \"./inscription-model/inscription-model.component\";\r\nimport { LiveChatModelComponent } from \"./live-chat-model/live-chat-model.component\";\r\nimport { LivePrivateModelComponent } from \"./live-private-model/live-private-model.component\";\r\nimport { LiveVipModelComponent } from \"./live-vip-model/live-vip-model.component\";\r\nimport { ProfilModelComponent } from \"./profil-model/profil-model.component\";\r\nimport { LiveTipsModelComponent } from './live-tips-model/live-tips-model.component';\r\nimport { LiveFreeSaloonModelComponent } from './live-free-saloon-model/live-free-saloon-model.component';\r\nimport { LiveTipsClientsModelComponent } from './live-tips-clients-model/live-tips-clients-model.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: 'dashboard',\r\n    component: DashboardComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n    path: 'motdepasseoublie',\r\n    component: SendForgotModelComponent\r\n  },\r\n  {\r\n    path: 'connexion',\r\n    component: ConnexionModelComponent\r\n  },\r\n  {\r\n    path: 'inscription',\r\n    component: InscriptionModelComponent\r\n  },\r\n  {\r\n    path: 'albums',\r\n    component: AlbumsComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n    path: 'profile',\r\n    component: ProfilModelComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n    path: 'chat',\r\n    component: LiveChatModelComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n    path: 'live-private',\r\n    component: LivePrivateModelComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n    path: 'live-vip',\r\n    component: LiveVipModelComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n    path: 'live-tips',\r\n    component: LiveTipsModelComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n    path: 'live-tips-model',\r\n    component: LiveTipsClientsModelComponent,\r\n    canActivate: [AuthModelGuardService]\r\n  },\r\n  {\r\n  path: 'live-choice-us',\r\n  component: LiveFreeSaloonModelComponent,\r\n  canActivate: [AuthModelGuardService]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ModelRoutingModule { }\r\n","import { AuthService } from 'src/app/services/auth/auth.service';\r\nimport { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthModelGuardService implements CanActivate {\r\n\r\n  constructor(private authService : AuthService, public router : Router) { }\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean | UrlTree | Observable<boolean | UrlTree> | Promise<boolean | UrlTree> {\r\n    if(!this.authService.getToken()){\r\n        this.router.navigateByUrl(\"accueil\");\r\n        return false;\r\n    }\r\n    const token = this.authService.getToken();\r\n    this.authService.verifyToken(token).subscribe(\r\n      (data) => {\r\n        if (data && data.role === 'model') {\r\n          // this.router.navigateByUrl(\"modele/albums\");\r\n          return true;\r\n        } else {\r\n          this.router.navigateByUrl(\"accueil\");\r\n          return false;\r\n        }\r\n        // console.log(data)\r\n      }, (error) => {\r\n        console.log(error);\r\n        this.router.navigateByUrl(\"accueil\");\r\n        return false;\r\n      }\r\n    )\r\n    return true\r\n  }\r\n}\r\n"]}